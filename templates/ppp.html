{% extends 'prueba_menu.html' %}
{%block title %} Generador {%endblock%}

{%block content%}
<link rel="stylesheet" href="{{url_for('static', filename='css/prueba.css')}}" />
<div class="contenido">
    <div class="container1">
        <div class="header1">
            <h1>Generador</h1>
            <p>Escriba una url o texto para generar c√≥digo QR</p>
        </div>
      <form action="{{url_for('creacionQR')}}" method="post" name="#qr">
        <div class="input-form">
            <input type="text" id="txtdato"  name="txtdato" required placeholder="Ingrese URL o texto" />
            <input type="text" id="txtname" name="txtname"  placeholder="Nombre del qr">
            <select name="tipoQr">

              <option value="CIRCULO">CIRCULO</option>
        
              <option value="CUADRADO">CUADRADO</option>
        
              <option value="BARRA_VERTICAL">BARRA_VERTICAL</option>
        
              <option value="BARRA_HORIZONTAL">BARRA_HORIZONTAL</option>
        
              <option value="REDONDEADO">REDONDEADO</option>
  
              <option value="CUADRADO_GRANDE">CUADRADO_GRANDE</option>
        
            </select>
            <p>{{msg}}</p>
            <button class="generate-btn">Genera tu codigo QR</button>
        </div>
      </form>
        <div class="qr-code">
            <img src="images/qrcode.png" class="qr-image" />
        </div>

        <div>
            <button class="download-btn">Descarga tu codigo QR</button>
        </div>
    </div>
</div>
  <script>
    /*
    const container = document.querySelector(".container");
    const generateBtn = document.querySelector(".generate-btn");
    const downloadBtn = document.querySelector(".download-btn");
    const qrInput = document.querySelector("txtdato");
    const qrImg = document.querySelector(".qr-image");
    let downloadResource = {
      url: "",
      name: "",
    };

    generateBtn.onclick = function () {
      if (qrInput.value.length > 0) {
        generateBtn.innerText = "Generating QR Code...";
        const url =
          "https://api.qrserver.com/v1/create-qr-code/?size=170x170&format=png&download=1&&data=" +
          qrInput.value;
        qrImg.src = url;
        qrImg.onload = function () {
          container.classList.add("active");
          generateBtn.innerText = "Genera tu codigo QR";
          downloadResource = {
            url,
            name: String(qrInput.value).split(".")[0] ?? qrInput.value,
          };
        };
      }
    };

    downloadBtn.onclick = function () {
      const { url, name } = downloadResource;
      console.log(downloadResource);
      if (!url || !name) return;

      const fileName = name;
      var el = document.createElement("a");
      el.setAttribute("href", url);
      el.setAttribute("download", fileName);
      document.body.appendChild(el);
      el.click();
      el.remove();
    };
    */
  </script>

{%endblock%}